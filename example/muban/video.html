<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>视频播放器</title>
		<link rel="stylesheet" type="text/css" href="../../css/mdui.css" />
		<style type="text/css">
			body {
				font-family: "microsoft yahei";
			}
			
			#pause {
				display: none;
			}
		</style>
	</head>

	<body class="mdui-appbar-with-toolbar ">
		<header class="mdui-appbar mdui-appbar-fixed mdui-color-theme">
			<div class="mdui-toolbar">
				<a href="javascript:;" class="mdui-btn mdui-btn-icon mui-action-back"><i class="mdui-icon material-icons">&#xe5c4;</i></a>
				<span class="mdui-typo-title">视频播放器</span>
				<div class="mdui-toolbar-spacer"></div>
			</div>
		</header>
		<div class="mdui-container">

			<p>默认控件播放</p>
			<video class="mdui-video-fluid" controls="controls" poster="../../images/video_demo.png">
				<source src="../../video/demo_mp4.mp4" type="video/mp4"></source>
			</video>
			<p>自定义控件播放</p>
			<div class="mdui-grid-tile">
				<video id="source" class="mdui-video-fluid" poster="../../images/video_demo.png">
					<source src="../../video/demo_mp4.mp4" type="video/mp4"></source>
				</video>
			</div>
			<div class="mdui-row">
				<div class="mdui-col-xs-5">
					<a id="pause" href="javascript:;" class="mdui-btn mdui-btn-icon">
						<i class="mdui-icon material-icons mdui-text-color-theme-accent">&#xe034;</i>
					</a>
					<a id="play" href="javascript:;" class="mdui-btn mdui-btn-icon">
						<i class="mdui-icon material-icons mdui-text-color-theme-accent">&#xe037;</i>
					</a>
					<span class="mdui-typo-caption"><span id="currentTime">0:00</span>/<span id="duration">0:00</span></span>
				</div>
				<div class="mdui-col-xs-6">
					<label class="mdui-slider">
					  	<input id="videoTime" type="range" step="1" min="0" max="100" value="0"/>
					</label>
				</div>
			</div>
		</div>

		<script src="../../js/mdui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../api.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			API.init();
			var intTime;
			function formatSeconds(value) {
				var theTime = parseInt(value); // 秒 
				var theTime1 = 0; // 分 
				var theTime2 = 0; // 小时 
				// alert(theTime); 
				if(theTime > 60) {
					theTime1 = parseInt(theTime / 60);
					theTime = parseInt(theTime % 60);
					// alert(theTime1+"-"+theTime); 
					if(theTime1 > 60) {
						theTime2 = parseInt(theTime1 / 60);
						theTime1 = parseInt(theTime1 % 60);
					}
				}
				var result = "" + theTime;
				if(theTime1 >= 0) {
					result = ":" + theTime1 + result;
				}
				if(theTime2 >= 0) {
					result = "" + theTime2 + result;
				}
				return result;
			}
			document.getElementById("play").addEventListener('tap', function() {
				document.getElementById("source").play();
				document.getElementById("play").style.display = 'none';
				document.getElementById("pause").style.display = 'inline-block';
				intTime = setInterval(getVideoTime,1000);
			})
			document.getElementById("pause").addEventListener('tap', function() {
				document.getElementById("play").style.display = 'inline-block';
				document.getElementById("pause").style.display = 'none';
				document.getElementById("source").pause();
				clearInterval(intTime);
			})
			
			function getVideoTime(){
				var duration = document.getElementById("source").duration;
				document.getElementById("duration").innerHTML = formatSeconds(duration.toFixed(0));
				document.getElementById("videoTime").setAttribute('max',duration.toFixed(0));
				document.getElementById("videoTime").setAttribute('value',document.getElementById("source").currentTime.toFixed(0));
				document.getElementById("currentTime").innerHTML = formatSeconds(document.getElementById("source").currentTime);
				if(document.getElementById("source").ended == true){
					document.getElementById("videoTime").setAttribute('value',duration.toFixed(0));
					mdui.updateSliders();
					clearInterval(intTime);
					
				}else{
					mdui.updateSliders();
				}
			}
			
		</script>
	</body>

</html>